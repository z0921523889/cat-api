version: '3.7'
services:

    db:
      image: "postgres:latest"
      networks:
        - default
        - app_net
      environment:
        POSTGRES_USER : ${POSTGRES_USER}
        POSTGRES_PASSWORD : ${POSTGRES_PASSWORD}

    api:
      depends_on: 
          - db
      image: "cat-api:latest"
      ports:
        - 8085:8085
      networks:
        - default
        - app_net
      links:
        - db
      environment:
        APPLICATION_HOST : ${APPLICATION_HOST}
        APPLICATION_PORT : ${APPLICATION_PORT}
        POSTGRES_HOST : ${POSTGRES_HOST}
        POSTGRES_PORT : ${POSTGRES_PORT}
        POSTGRES_USER : ${POSTGRES_USER}
        POSTGRES_PASSWORD : ${POSTGRES_PASSWORD}
        SCHEDULE_JOB_ENABLE : ${SCHEDULE_JOB_ENABLE}
        SWAGGER_DOC_ENABLE  : ${SWAGGER_DOC_ENABLE}
networks:
  app_net:
    external: true
